<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–∞—Å–∫—Ä–∞—Å–∫–∞ - Telegram Mini App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 20px;
            overflow: hidden;
        }
        
        .header {
            text-align: center;
            padding: 15px 0;
            margin-bottom: 20px;
        }
        
        .header h1 {
            font-size: 28px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            margin-bottom: 5px;
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .app-container {
            display: flex;
            flex: 1;
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto;
            width: 100%;
        }
        
        .gallery-container {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            width: 250px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            overflow-y: auto;
        }
        
        .gallery-container h2 {
            margin-bottom: 15px;
            font-size: 20px;
            text-align: center;
        }
        
        .categories {
            margin-bottom: 20px;
        }
        
        .categories button {
            width: 100%;
            padding: 10px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .categories button:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .categories button.active {
            background: rgba(255, 255, 255, 0.4);
        }
        
        .image-thumbnails {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .thumbnail {
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            aspect-ratio: 1/1;
            background: rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
        }
        
        .thumbnail:hover {
            transform: scale(1.05);
        }
        
        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .coloring-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .canvas-container {
            position: relative;
            flex: 1;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        
        #coloring-canvas {
            display: block;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .color-palette {
            display: flex;
            gap: 8px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .color-item {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease;
        }
        
        .color-item:hover {
            transform: scale(1.1);
        }
        
        .color-item.active {
            transform: scale(1.15);
            border: 3px solid white;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.5);
        }
        
        .tools {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .tool-btn {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tool-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .current-color {
            margin-top: 15px;
            text-align: center;
            font-size: 16px;
            font-weight: 500;
        }
        
        .footer {
            text-align: center;
            padding: 20px 0;
            font-size: 14px;
            opacity: 0.8;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .gallery-container {
                width: 100%;
                max-height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üé® –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –†–∞—Å–∫—Ä–∞—Å–∫–∞</h1>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —Ä–∞—Å–∫—Ä–∞—Å—å—Ç–µ –µ–≥–æ –æ–¥–Ω–∏–º –∫–∞—Å–∞–Ω–∏–µ–º!</p>
    </div>
    
    <div class="app-container">
        <div class="gallery-container">
            <h2>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h2>
            
            <div class="categories">
                <button class="active">–í—Å–µ</button>
                <button>–ñ–∏–≤–æ—Ç–Ω—ã–µ</button>
                <button>–ü—Ä–∏—Ä–æ–¥–∞</button>
                <button>–ì–æ—Ä–æ–¥–∞</button>
                <button>–ú–∞–Ω–¥–∞–ª—ã</button>
            </div>
            
            <div class="image-thumbnails">
                <div class="thumbnail" data-image="1">
                    <svg viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="40" fill="none" stroke="#fff" stroke-width="2" />
                        <circle cx="35" cy="40" r="8" fill="none" stroke="#fff" stroke-width="2" />
                        <circle cx="65" cy="40" r="8" fill="none" stroke="#fff" stroke-width="2" />
                        <path d="M 30 70 Q 50 85 70 70" fill="none" stroke="#fff" stroke-width="2" />
                    </svg>
                </div>
                <div class="thumbnail" data-image="2">
                    <svg viewBox="0 0 100 100">
                        <path d="M20,20 L80,20 L80,80 L20,80 Z" fill="none" stroke="#fff" stroke-width="2" />
                        <path d="M30,30 L50,50 L70,30" fill="none" stroke="#fff" stroke-width="2" />
                        <circle cx="50" cy="65" r="10" fill="none" stroke="#fff" stroke-width="2" />
                    </svg>
                </div>
                <div class="thumbnail" data-image="3">
                    <svg viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="40" fill="none" stroke="#fff" stroke-width="2" />
                        <path d="M30,30 L70,70 M70,30 L30,70" fill="none" stroke="#fff" stroke-width="2" />
                    </svg>
                </div>
                <div class="thumbnail" data-image="4">
                    <svg viewBox="0 0 100 100">
                        <rect x="20" y="20" width="60" height="60" fill="none" stroke="#fff" stroke-width="2" rx="10" />
                        <circle cx="50" cy="40" r="8" fill="none" stroke="#fff" stroke-width="2" />
                        <circle cx="50" cy="65" r="8" fill="none" stroke="#fff" stroke-width="2" />
                    </svg>
                </div>
                <div class="thumbnail" data-image="5">
                    <svg viewBox="0 0 100 100">
                        <polygon points="50,20 80,80 20,80" fill="none" stroke="#fff" stroke-width="2" />
                        <circle cx="50" cy="50" r="15" fill="none" stroke="#fff" stroke-width="2" />
                    </svg>
                </div>
                <div class="thumbnail" data-image="6">
                    <svg viewBox="0 0 100 100">
                        <path d="M50,20 L80,40 L65,75 L35,75 L20,40 Z" fill="none" stroke="#fff" stroke-width="2" />
                        <circle cx="50" cy="50" r="10" fill="none" stroke="#fff" stroke-width="2" />
                    </svg>
                </div>
            </div>
        </div>
        
        <div class="coloring-area">
            <div class="canvas-container">
                <canvas id="coloring-canvas"></canvas>
            </div>
            
            <div class="current-color">
                –¢–µ–∫—É—â–∏–π —Ü–≤–µ—Ç: <span id="current-color-name">–ö—Ä–∞—Å–Ω—ã–π</span>
            </div>
            
            <div class="color-palette">
                <div class="color-item active" style="background-color: #FF5252;" data-color="#FF5252" data-name="–ö—Ä–∞—Å–Ω—ã–π"></div>
                <div class="color-item" style="background-color: #FF4081;" data-color="#FF4081" data-name="–†–æ–∑–æ–≤—ã–π"></div>
                <div class="color-item" style="background-color: #E040FB;" data-color="#E040FB" data-name="–§–∏–æ–ª–µ—Ç–æ–≤—ã–π"></div>
                <div class="color-item" style="background-color: #7C4DFF;" data-color="#7C4DFF" data-name="–¢—ë–º–Ω–æ-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π"></div>
                <div class="color-item" style="background-color: #536DFE;" data-color="#536DFE" data-name="–°–∏–Ω–∏–π"></div>
                <div class="color-item" style="background-color: #448AFF;" data-color="#448AFF" data-name="–ì–æ–ª—É–±–æ–π"></div>
                <div class="color-item" style="background-color: #40C4FF;" data-color="#40C4FF" data-name="–°–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–π"></div>
                <div class="color-item" style="background-color: #18FFFF;" data-color="#18FFFF" data-name="–ë–∏—Ä—é–∑–æ–≤—ã–π"></div>
                <div class="color-item" style="background-color: #64FFDA;" data-color="#64FFDA" data-name="–ú–æ—Ä—Å–∫–æ–π –≤–æ–ª–Ω—ã"></div>
                <div class="color-item" style="background-color: #69F0AE;" data-color="#69F0AE" data-name="–ó–µ–ª—ë–Ω—ã–π"></div>
                <div class="color-item" style="background-color: #B2FF59;" data-color="#B2FF59" data-name="–°–∞–ª–∞—Ç–æ–≤—ã–π"></div>
                <div class="color-item" style="background-color: #EEFF41;" data-color="#EEFF41" data-name="–ñ—ë–ª—Ç—ã–π"></div>
                <div class="color-item" style="background-color: #FFFF00;" data-color="#FFFF00" data-name="–Ø—Ä–∫–æ-–∂—ë–ª—Ç—ã–π"></div>
                <div class="color-item" style="background-color: #FFD740;" data-color="#FFD740" data-name="–û—Ä–∞–Ω–∂–µ–≤—ã–π"></div>
                <div class="color-item" style="background-color: #FFAB40;" data-color="#FFAB40" data-name="–¢—ë–º–Ω–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π"></div>
                <div class="color-item" style="background-color: #FF6E40;" data-color="#FF6E40" data-name="–ö–æ—Ä–∞–ª–ª–æ–≤—ã–π"></div>
                <div class="color-item" style="background-color: #9E9E9E;" data-color="#9E9E9E" data-name="–°–µ—Ä—ã–π"></div>
                <div class="color-item" style="background-color: #000000;" data-color="#000000" data-name="–ß—ë—Ä–Ω—ã–π"></div>
            </div>
            
            <div class="tools">
                <button class="tool-btn" id="reset-btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
                <button class="tool-btn" id="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <div class="footer">
        –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è —Ä–∞—Å–∫—Ä–∞—Å–∫–∞ | –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Telegram Mini App
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('coloring-canvas');
            const ctx = canvas.getContext('2d');
            const colorItems = document.querySelectorAll('.color-item');
            const currentColorName = document.getElementById('current-color-name');
            const resetBtn = document.getElementById('reset-btn');
            const saveBtn = document.getElementById('save-btn');
            const thumbnails = document.querySelectorAll('.thumbnail');
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ —Ö–æ–ª—Å—Ç–∞
            function setupCanvas() {
                const container = canvas.parentElement;
                canvas.width = container.clientWidth;
                canvas.height = container.clientHeight;
                drawCurrentImage();
            }
            
            // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            let currentColor = '#FF5252';
            let currentImage = '1';
            let paintedAreas = {};
            
            // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å–∫—Ä–∞—Å–∫–∏
            const images = {
                '1': {
                    draw: function() {
                        const w = canvas.width;
                        const h = canvas.height;
                        const centerX = w / 2;
                        const centerY = h / 2;
                        const radius = Math.min(w, h) * 0.3;
                        
                        // –û—á–∏—Å—Ç–∫–∞ —Ö–æ–ª—Å—Ç–∞
                        ctx.clearRect(0, 0, w, h);
                        
                        // –†–∏—Å—É–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç—É—Ä—ã
                        ctx.strokeStyle = '#333';
                        ctx.lineWidth = 2;
                        
                        // –õ–∏—Ü–æ
                        ctx.beginPath();
                        ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                        ctx.stroke();
                        
                        // –ì–ª–∞–∑–∞
                        ctx.beginPath();
                        ctx.arc(centerX - radius*0.3, centerY - radius*0.2, radius*0.15, 0, Math.PI * 2);
                        ctx.stroke();
                        
                        ctx.beginPath();
                        ctx.arc(centerX + radius*0.3, centerY - radius*0.2, radius*0.15, 0, Math.PI * 2);
                        ctx.stroke();
                        
                        // –†–æ—Ç
                        ctx.beginPath();
                        ctx.arc(centerX, centerY + radius*0.2, radius*0.25, 0, Math.PI);
                        ctx.stroke();
                    },
                    areas: [
                        {id: 'face', path: function() {
                            const w = canvas.width;
                            const h = canvas.height;
                            const centerX = w / 2;
                            const centerY = h / 2;
                            const radius = Math.min(w, h) * 0.3;
                            
                            ctx.beginPath();
                            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                            return new Path2D();
                        }},
                        {id: 'left-eye', path: function() {
                            const w = canvas.width;
                            const h = canvas.height;
                            const centerX = w / 2;
                            const centerY = h / 2;
                            const radius = Math.min(w, h) * 0.3;
                            
                            ctx.beginPath();
                            ctx.arc(centerX - radius*0.3, centerY - radius*0.2, radius*0.15, 0, Math.PI * 2);
                            return new Path2D();
                        }},
                        {id: 'right-eye', path: function() {
                            const w = canvas.width;
                            const h = canvas.height;
                            const centerX = w / 2;
                            const centerY = h / 2;
                            const radius = Math.min(w, h) * 0.3;
                            
                            ctx.beginPath();
                            ctx.arc(centerX + radius*0.3, centerY - radius*0.2, radius*0.15, 0, Math.PI * 2);
                            return new Path2D();
                        }},
                        {id: 'mouth', path: function() {
                            const w = canvas.width;
                            const h = canvas.height;
                            const centerX = w / 2;
                            const centerY = h / 2;
                            const radius = Math.min(w, h) * 0.3;
                            
                            ctx.beginPath();
                            ctx.arc(centerX, centerY + radius*0.2, radius*0.25, 0, Math.PI);
                            return new Path2D();
                        }}
                    ]
                },
                '2': {
                    draw: function() {
                        const w = canvas.width;
                        const h = canvas.height;
                        const padding = w * 0.1;
                        
                        ctx.clearRect(0, 0, w, h);
                        ctx.strokeStyle = '#333';
                        ctx.lineWidth = 2;
                        
                        // –î–æ–º
                        ctx.beginPath();
                        ctx.rect(padding, padding, w - padding*2, h - padding*2);
                        ctx.stroke();
                        
                        // –ö—Ä—ã—à–∞
                        ctx.beginPath();
                        ctx.moveTo(padding, padding);
                        ctx.lineTo(w/2, padding*0.5);
                        ctx.lineTo(w - padding, padding);
                        ctx.stroke();
                        
                        // –î–≤–µ—Ä—å
                        ctx.beginPath();
                        ctx.rect(w/2 - 20, h - padding - 50, 40, 50);
                        ctx.stroke();
                        
                        // –û–∫–Ω–æ
                        ctx.beginPath();
                        ctx.rect(w/2 - 15, padding + 40, 30, 30);
                        ctx.stroke();
                    },
                    areas: []
                }
            };
            
            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            function drawCurrentImage() {
                if (images[currentImage]) {
                    images[currentImage].draw();
                    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä–∞—à–µ–Ω–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π
                    for (const areaId in paintedAreas) {
                        if (paintedAreas[areaId]) {
                            fillArea(areaId, paintedAreas[areaId]);
                        }
                    }
                }
            }
            
            // –ó–∞–ª–∏–≤–∫–∞ –æ–±–ª–∞—Å—Ç–∏
            function fillArea(areaId, color) {
                if (!images[currentImage]) return;
                
                const area = images[currentImage].areas.find(a => a.id === areaId);
                if (!area) return;
                
                const path = area.path();
                ctx.fillStyle = color;
                ctx.fill(path);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∫—Ä–∞—à–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
                paintedAreas[areaId] = color;
            }
            
            // –í—ã–±–æ—Ä —Ü–≤–µ—Ç–∞
            colorItems.forEach(item => {
                item.addEventListener('click', function() {
                    colorItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    currentColor = this.dataset.color;
                    currentColorName.textContent = this.dataset.name;
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ —Ö–æ–ª—Å—Ç–µ
            canvas.addEventListener('click', function(e) {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏: –ø—Ä–æ—Å—Ç–æ –∑–∞–ª–∏–≤–∞–µ–º –æ–±–ª–∞—Å—Ç—å –≤–æ–∫—Ä—É–≥ —Ç–æ—á–∫–∏ –∫–ª–∏–∫–∞
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
                
                // –°–æ–∑–¥–∞–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –∑–∞–ª–∏–≤–∫–∏
                const gradient = ctx.createRadialGradient(x, y, 5, x, y, 50);
                gradient.addColorStop(0, currentColor);
                gradient.addColorStop(1, lightenColor(currentColor, 30));
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(x, y, 50, 0, Math.PI * 2);
                ctx.fill();
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≥—Ä–∞–Ω–∏—Ü—É
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.stroke();
            });
            
            // –°–±—Ä–æ—Å —Ä–∞—Å–∫—Ä–∞—Å–∫–∏
            resetBtn.addEventListener('click', function() {
                if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å —Ä–∞—Å–∫—Ä–∞—Å–∫—É?')) {
                    paintedAreas = {};
                    drawCurrentImage();
                }
            });
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            saveBtn.addEventListener('click', function() {
                const link = document.createElement('a');
                link.download = '—Ä–∞—Å–∫—Ä–∞—Å–∫–∞.png';
                link.href = canvas.toDataURL();
                link.click();
            });
            
            // –í—ã–±–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            thumbnails.forEach(thumb => {
                thumb.addEventListener('click', function() {
                    const imageId = this.dataset.image;
                    if (imageId !== currentImage) {
                        currentImage = imageId;
                        paintedAreas = {};
                        drawCurrentImage();
                    }
                });
            });
            
            // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Å–≤–µ—Ç–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–∞
            function lightenColor(color, percent) {
                let r = parseInt(color.substring(1, 3), 16);
                let g = parseInt(color.substring(3, 5), 16);
                let b = parseInt(color.substring(5, 7), 16);
                
                r = Math.min(255, r + r * percent / 100);
                g = Math.min(255, g + g * percent / 100);
                b = Math.min(255, b + b * percent / 100);
                
                return `#${Math.round(r).toString(16).padStart(2, '0')}${Math.round(g).toString(16).padStart(2, '0')}${Math.round(b).toString(16).padStart(2, '0')}`;
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            window.addEventListener('resize', setupCanvas);
            setupCanvas();
        });
    </script>
</body>
</html>
